<?xml version="1.0" encoding="utf-8" ?>
<RuleCollection>
  
  <Rule RuleId="100000" Description="创建基础科目">
    <Solution SolutionId="100001" Description="本金+利息+服务费+管理费">
      <Subject SubjectId="1"></Subject>
      <Subject SubjectId="2"></Subject>
      <Subject SubjectId="3"></Subject>
      <Subject SubjectId="9"></Subject>
    </Solution>
    <Solution SolutionId="100002" Description="本金+利息+服务费">
      <Subject SubjectId="1"></Subject>
      <Subject SubjectId="2"></Subject>
      <Subject SubjectId="3"></Subject>
    </Solution>
    <Solution SolutionId="100003" Description="本金+利息">
      <Subject SubjectId="1"></Subject>
      <Subject SubjectId="2"></Subject>
    </Solution>
    <Solution SolutionId="100004" Description="本金+利息+服务费+月担保费">
      <Subject SubjectId="1"></Subject>
      <Subject SubjectId="2"></Subject>
      <Subject SubjectId="3"></Subject>
      <Subject SubjectId="4"></Subject>
    </Solution>
    <Solution SolutionId="100005" Description="保证金">
      <Subject SubjectId="11"></Subject>
    </Solution>
    <Solution SolutionId="100006" Description="手续费+保证金">
      <Subject SubjectId="10"></Subject>
      <Subject SubjectId="11"></Subject>
    </Solution>
    <Solution SolutionId="100007" Description="手续费">
      <Subject SubjectId="10"></Subject>
    </Solution>
    <Solution SolutionId="100008" Description="代收渠道费">
      <Subject SubjectId="12"></Subject>
    </Solution>
    <Solution SolutionId="100009" Description="手续费+保证金+代收渠道费">
      <Subject SubjectId="10"></Subject>
      <Subject SubjectId="11"></Subject>
      <Subject SubjectId="12"></Subject>
    </Solution>
    <Solution SolutionId="100010" Description="代收费">
      <Subject SubjectId="13"></Subject>
    </Solution>
    <Solution SolutionId="100011" Description="本金+利息+管理费">
      <Subject SubjectId="1"></Subject>
      <Subject SubjectId="2"></Subject>
      <Subject SubjectId="9"></Subject>
    </Solution>
	  <Solution SolutionId="100012" Description="本金+利息+管理费+月担保费">
      <Subject SubjectId="1"></Subject>
      <Subject SubjectId="2"></Subject>
      <Subject SubjectId="9"></Subject>
      <Subject SubjectId="4"></Subject>
    </Solution>
    <Solution SolutionId="100013" Description="本金+利息+月服务费+月平台管理费">
      <Subject SubjectId="1"></Subject>
      <Subject SubjectId="2"></Subject>
      <Subject SubjectId="3"></Subject>
      <Subject SubjectId="14"></Subject>
    </Solution>
    <Solution SolutionId="100014" Description="本金+利息+管理及担保费">
      <Subject SubjectId="1"></Subject>
      <Subject SubjectId="2"></Subject>
      <Subject SubjectId="44"></Subject>
    </Solution>
  </Rule>
  
  <Rule RuleId="200000" Description="基础科目计算">
    
    <Solution SolutionId="200001" Description="等额本金普通月">
      <Subject SubjectId="1">Round(Divide(bus.LoanCapital,bus.LoanPeriod),2)</Subject>
    </Solution>
    
    <Solution SolutionId="200002" Description="等额本金最后一个月">
      <Subject SubjectId="1"> Round(bus.LoanCapital - (Round(Divide(bus.LoanCapital,bus.LoanPeriod),2) * (bus.LoanPeriod - 1)),2)</Subject>
    </Solution>
    
    <Solution SolutionId="200003" Description="月利息">
      <Subject SubjectId="2"> Round(Multiply(bus.LoanCapital,bus.InterestRate),2)</Subject>
    </Solution>
    
    <Solution SolutionId="200004" Description="月服务费">
      <Subject SubjectId="3"> Round(Multiply(bus.LoanCapital,bus.ServiceRate),2)</Subject>
    </Solution>
    
    <Solution SolutionId="200005" Description="月服务费除2">
      <Subject SubjectId="3"> Round(Multiply(bus.LoanCapital,bus.ServiceRate)/2,2)</Subject>
    </Solution>
    
    <Solution SolutionId="200006" Description="月担保费,服务费的一半">
      <Subject SubjectId="4"> Round(Multiply(bus.LoanCapital,bus.ServiceRate)/2,2)</Subject>
    </Solution>
    
    <Solution SolutionId="200007" Description="月管理费">
      <Subject SubjectId="9"> Round(Multiply(bus.LoanCapital,bus.ManagementRate),2)</Subject>
    </Solution>
    
    <Solution SolutionId="200008" Description="楼一贷本金算法">
      <Subject SubjectId="1">Round(Multiply(bus.LoanCapital,bus.CapitalRate),2)</Subject>
    </Solution>
    
    <Solution SolutionId="200009" Description="楼一贷最后一个月本金算法">
      <Subject SubjectId="1">LastMonthCapital(bus)</Subject>
    </Solution>
    
    <Solution SolutionId="200010" Description="月担保费为0">
      <Subject SubjectId="4">0</Subject>
    </Solution>
    
    <Solution SolutionId="200011" Description="保证金">
      <Subject SubjectId="11">bus.EarnestAmt</Subject>
    </Solution>
    
    <Solution SolutionId="200012" Description="手续费">
      <Subject SubjectId="10">bus.ProceduresAmout</Subject>
    </Solution>
    
    <Solution SolutionId="200013" Description="代收渠道费">
      <Subject SubjectId="12">Round(Multiply(bus.LoanCapital,bus.ChannelRate),2)</Subject>
    </Solution>
    
    <Solution SolutionId="200014" Description="代收费">
      <Subject SubjectId="13">Round(Multiply(bus.LoanCapital,bus.CollectionRate),2)</Subject>
    </Solution>
	
	  <Solution SolutionId="200015" Description="月管理费除2">
      <Subject SubjectId="9"> Round(Multiply(bus.LoanCapital,bus.ManagementRate)/2,2)</Subject>
    </Solution>
    
    <Solution SolutionId="200016" Description="月担保费,服务费的一半">
      <Subject SubjectId="4"> Round(Multiply(bus.LoanCapital,bus.ManagementRate)/2,2)</Subject>
    </Solution>

    <Solution SolutionId="200017" Description="等额本息本金算法">
      <Subject SubjectId="1"> GetCapFromAvgCapInterByBusiness(bus)</Subject>
    </Solution>
    
    <Solution SolutionId="200018" Description="等额本息利息算法">
      <Subject SubjectId="2"> GetInterFromAvgCapInterByBusiness(bus)</Subject>
    </Solution>
    
    <Solution SolutionId="200019" Description="扣款失败违约金算法">
      <Subject SubjectId="38">GetDueManageFee(bus)</Subject>
    </Solution>

    <Solution SolutionId="200020" Description="月服务费">
      <Subject SubjectId="3">GetServiceFee(bus)</Subject>
    </Solution>
    <Solution SolutionId="200021" Description="月平台管理费">
      <Subject SubjectId="14">Round(Multiply(bus.LoanCapital,bus.PlatformRate),2)</Subject>
    </Solution>
    <Solution SolutionId="200022" Description="违约金">
      <Subject SubjectId="39" NeedUpdate="true">GetBreachingFee(bus)</Subject>
    </Solution>
	  <Solution SolutionId="200023" Description="扣款失败服务费">
      <Subject SubjectId="40" NeedUpdate="false">GetServiceDeductFail(bus)</Subject>
    </Solution>
	  <Solution SolutionId="200024" Description="等额本息本金卡卡贷p2p算法">
      <Subject SubjectId="1">GetCapFromRemCapital(bus)</Subject>
    </Solution>
	  <Solution SolutionId="200025" Description="等额本息利息卡卡贷p2p算法">
      <Subject SubjectId="2">GetInterFromRemCapital(bus)</Subject>
    </Solution>
	  <Solution SolutionId="200026" Description="最后一期剩余本金">
      <Subject SubjectId="1">GetRemCapital(bus)</Subject>
    </Solution>
	  <Solution SolutionId="200027" Description="最后一期服务费">
      <Subject SubjectId="3">GetLastBillServiceFee(bus)</Subject>
    </Solution>
    <Solution SolutionId="200028" Description="月利息，基准利率变动算法">
      <Subject SubjectId="2">Round(CSharp_GetFinancingInterest(bus),2)</Subject>
    </Solution>
    <Solution SolutionId="200029" Description="管理及担保费算法">
      <Subject SubjectId="44">GetManageGuarantee(bus)</Subject>
    </Solution>
  </Rule>
  
  <Rule RuleId="300000" Description="打包拆包科目包">
    <Solution SolutionId="300001" Description="所有科目">
      <Subject SubjectId="0"></Subject>
    </Solution>
    <Solution SolutionId="300002" Description="本金+利息+管理费">
      <Subject SubjectId="1"></Subject>
      <Subject SubjectId="2"></Subject>
      <Subject SubjectId="9"></Subject>
    </Solution>
    <Solution SolutionId="300003" Description="本金+利息">
      <Subject SubjectId="1"></Subject>
      <Subject SubjectId="2"></Subject>
    </Solution>
    <Solution SolutionId="300004" Description="服务费+服务费扣失">
      <Subject SubjectId="3"></Subject>
      <Subject SubjectId="22"></Subject>
    </Solution>
    <Solution SolutionId="300005" Description="本金+利息+管理费+本息扣失+罚息">
      <Subject SubjectId="1"></Subject>
      <Subject SubjectId="2"></Subject>
      <Subject SubjectId="9"></Subject>
      <Subject SubjectId="21"></Subject>
      <Subject SubjectId="23"></Subject>
    </Solution>
    <Solution SolutionId="300006" Description="服务费+本息扣失">
      <Subject SubjectId="3"></Subject>
      <Subject SubjectId="21"></Subject>
    </Solution>
    <Solution SolutionId="300008" Description="服务费">
      <Subject SubjectId="3"></Subject>
    </Solution>
    <Solution SolutionId="300009" Description="本金+利息+服务费">
      <Subject SubjectId="1"></Subject>
      <Subject SubjectId="2"></Subject>
      <Subject SubjectId="3"></Subject>
    </Solution>
    <Solution SolutionId="300010" Description="本金+利息+服务费+管理费">
      <Subject SubjectId="1"></Subject>
      <Subject SubjectId="2"></Subject>
      <Subject SubjectId="3"></Subject>
      <Subject SubjectId="9"></Subject>
    </Solution>
    <Solution SolutionId="300011" Description="保证金">
      <Subject SubjectId="11"></Subject>
    </Solution>
    <Solution SolutionId="300012" Description="手续费">
      <Subject SubjectId="10"></Subject>
    </Solution>
    <Solution SolutionId="300013" Description="本息扣失">
      <Subject SubjectId="21"></Subject>
    </Solution>
    <Solution SolutionId="300014" Description="服务费扣失">
      <Subject SubjectId="22"></Subject>
    </Solution>
    <Solution SolutionId="300015" Description="罚息">
      <Subject SubjectId="23"></Subject>
    </Solution>
    <Solution SolutionId="300016" Description="担保违约金">
      <Subject SubjectId="25"></Subject>
    </Solution>
    <Solution SolutionId="300017" Description="诉讼费">
      <Subject SubjectId="26"></Subject>
    </Solution>
    <Solution SolutionId="300018" Description="诉讼违约金">
      <Subject SubjectId="27"></Subject>
    </Solution>
    <Solution SolutionId="300019" Description="加收利息">
      <Subject SubjectId="28"></Subject>
    </Solution>
    <Solution SolutionId="300020" Description="加收服务费">
      <Subject SubjectId="29"></Subject>
    </Solution>
    <Solution SolutionId="300021" Description="加收担保管理费">
      <Subject SubjectId="36"></Subject>
    </Solution>
    <Solution SolutionId="300022" Description="提前清贷服务费">
      <Subject SubjectId="35"></Subject>
    </Solution>
    <Solution SolutionId="300023" Description="剩余本金">
      <Subject SubjectId="31"></Subject>
    </Solution>
    <Solution SolutionId="300024" Description="手续费+保证金">
      <Subject SubjectId="10"></Subject>
      <Subject SubjectId="11"></Subject>
    </Solution>
    <Solution SolutionId="300025" Description="服务费+月担保管理费">
      <Subject SubjectId="3"></Subject>
      <Subject SubjectId="4"></Subject>
    </Solution>
    <Solution SolutionId="300026" Description="本金">
      <Subject SubjectId="1"></Subject>
    </Solution>
    <Solution SolutionId="300027" Description="利息">
      <Subject SubjectId="2"></Subject>
    </Solution>
    <Solution SolutionId="300028" Description="月担保管理费">
      <Subject SubjectId="4"></Subject>
    </Solution>
    <Solution SolutionId="300029" Description="月管理费">
      <Subject SubjectId="9"></Subject>
    </Solution>
    <Solution SolutionId="300030" Description="代收渠道费">
      <Subject SubjectId="12"></Subject>
    </Solution>
    <Solution SolutionId="300031" Description="手续费+保证金+代收渠道费">
      <Subject SubjectId="10"></Subject>
      <Subject SubjectId="11"></Subject>
      <Subject SubjectId="12"></Subject>
    </Solution>
    <Solution SolutionId="300032" Description="代收费">
      <Subject SubjectId="13"></Subject>
    </Solution>
    <Solution SolutionId="300033" Description="月管理费+本息扣失">
  	<Subject SubjectId="9"></Subject>
   	<Subject SubjectId="21"></Subject>
    </Solution>
    <Solution SolutionId="300034" Description="扣款失败违约金">
      <Subject SubjectId="38"></Subject>
    </Solution>
    <Solution SolutionId="300035" Description="平台管理费+服务费">
      <Subject SubjectId="3"></Subject>
      <Subject SubjectId="14"></Subject>
    </Solution>
    <Solution SolutionId="300036" Description="平台管理费">
      <Subject SubjectId="14"></Subject>
    </Solution>
    <Solution SolutionId="300037" Description="违约金+罚息+本金+利息">
      <Subject SubjectId="1"></Subject>
      <Subject SubjectId="2"></Subject>
      <Subject SubjectId="23"></Subject>
      <Subject SubjectId="39"></Subject>
    </Solution>
    <Solution SolutionId="300038" Description="违约金+罚息">
      <Subject SubjectId="23"></Subject>
      <Subject SubjectId="39"></Subject>
    </Solution>
	  <Solution SolutionId="300039" Description="扣款失败服务费">
      <Subject SubjectId="40"></Subject>
    </Solution>
    <Solution SolutionId="300040" Description="扣款失败服务费+管理及担保费+延迟支付违约金">
      <Subject SubjectId="40"></Subject>
      <Subject SubjectId="41"></Subject>
      <Subject SubjectId="44"></Subject>
    </Solution>
    <Solution SolutionId="300041" Description="延迟支付违约金">
      <Subject SubjectId="41"></Subject>
    </Solution>
    <Solution SolutionId="300042" Description="管理及担保费">
      <Subject SubjectId="44"></Subject>
    </Solution>
	<Solution SolutionId="300043" Description="本金+利息+扣款失败违约金+罚息">
      <Subject SubjectId="1"></Subject>
	  <Subject SubjectId="2"></Subject>
	  <Subject SubjectId="38"></Subject>
	  <Subject SubjectId="23"></Subject>
    </Solution>
  </Rule>

  <Rule RuleId="400000" Description="本息扣失科目包">
    <Solution SolutionId="400001" Description="本金+利息+管理费">
      <Subject SubjectId="1"></Subject>
      <Subject SubjectId="2"></Subject>
      <Subject SubjectId="9"></Subject>
    </Solution>
    
    <Solution SolutionId="400002" Description="本金+利息+服务费">
      <Subject SubjectId="1"></Subject>
      <Subject SubjectId="2"></Subject>
      <Subject SubjectId="3"></Subject>
    </Solution>
    
    <Solution SolutionId="400003" Description="本金+利息">
      <Subject SubjectId="1"></Subject>
      <Subject SubjectId="2"></Subject>
    </Solution>
	<Solution SolutionId="400004" Description="本金+利息+服务费+平台管理费">
      <Subject SubjectId="1"></Subject>
      <Subject SubjectId="2"></Subject>
	  <Subject SubjectId="3"></Subject>
      <Subject SubjectId="14"></Subject>
    </Solution>
  </Rule>

  <Rule RuleId="500000" Description="服务费扣失科目包">
    <Solution SolutionId="500001" Description="服务费">
      <Subject SubjectId="3"></Subject>
    </Solution>
    <Solution SolutionId="500002" Description="管理费">
      <Subject SubjectId="9"></Subject>
    </Solution>
  </Rule>

  <Rule RuleId="600000" Description="产生罚息科目包">
    <Solution SolutionId="600001" Description="本金+利息+服务费">
      <Subject SubjectId="1"></Subject>
      <Subject SubjectId="2"></Subject>
      <Subject SubjectId="3"></Subject>
    </Solution>
    <Solution SolutionId="600002" Description="本金+利息+管理费">
      <Subject SubjectId="1"></Subject>
      <Subject SubjectId="2"></Subject>
      <Subject SubjectId="9"></Subject>
    </Solution>
    <Solution SolutionId="600003" Description="本金+利息">
      <Subject SubjectId="1"></Subject>
      <Subject SubjectId="2"></Subject>
    </Solution>
    
    <Solution SolutionId="600004" SubjectId="41" Description="延迟支付违约金">
      <Subject SubjectId="1"></Subject>
      <Subject SubjectId="2"></Subject>
      <Subject SubjectId="44"></Subject>
    </Solution>
  </Rule>

  <Rule RuleId="700000" Description="产生其他衍生科目包">
      <Solution SolutionId="700001" SubjectId="38" Description="扣款失败违约金：本金+利息">
        <Subject SubjectId="1"></Subject>
        <Subject SubjectId="2"></Subject>
      </Solution>
      <Solution SolutionId="700002" SubjectId="39" Description="违约金：本金+利息">
        <Subject SubjectId="1"></Subject>
        <Subject SubjectId="2"></Subject>
      </Solution>
	  <Solution SolutionId="700003" SubjectId="40" Description="扣款失败服务费：本金+利息+服务费+平台管理费">
		  <Subject SubjectId="1"></Subject>
		  <Subject SubjectId="2"></Subject>
		  <Subject SubjectId="3"></Subject>
		  <Subject SubjectId="14"></Subject>
    </Solution>
    <Solution SolutionId="700004" SubjectId="40" Description="扣款失败服务费：本金+利息+服务费+平台管理费">
      <Subject SubjectId="1"></Subject>
      <Subject SubjectId="2"></Subject>
      <Subject SubjectId="44"></Subject>
    </Solution>
  </Rule>
  
</RuleCollection>