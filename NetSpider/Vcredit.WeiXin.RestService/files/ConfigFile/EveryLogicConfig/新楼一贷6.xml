<?xml version="1.0" encoding="utf-8" ?>
<RunModule>
  <BusinessLogic ID="6" Description="新楼一贷模式">
    
    <Flow Type="CreatePreBillFlowLogic" Description="创建前置账单配置">
      <Step Type="CreatePreBillItemFlowStep" Description="创建前置账单配置">
        <IfOperation Condition='bus.SaleMode=="SALEMODE/DAILIREN"' Description="代理人模式增加代收费前置科目">
          <Operation RuleId="100000" SolutionId="100005" CanDeduct="true" Description="代收费">
            <Operation RuleId="200000" SolutionId="200014"  Description="代收费算法" />
          </Operation>
        </IfOperation>
      </Step>
    </Flow>

    <Flow Type="CreateBillFlowLogic" Description="创建账单配置">
      <Step Type="CreateBillItemFlowStep" Description="创建基础科目配置">
        <IfOperation Condition='bus.LendingSideKey=="COMPANY/WX_QDWX_LENDING"' Description = "青岛小贷类似2+2合同">
          
            <Operation RuleId="100000" SolutionId="100001" Description="本金+利息+服务费+管理费">
                <IfOperation Condition="IsLastBill(bus)" >
                  <Operation RuleId="200000" SolutionId="200009" Description="最后一期账单本金算法"/>
                  <Else>
                    <Operation RuleId="200000" SolutionId="200008"  Description="前期账单本金算法"/>
                  </Else>
                </IfOperation>
                <Operation RuleId="200000" SolutionId="200003" Description="月利息算法" />
                <Operation RuleId="200000" SolutionId="200004" Description="月服务费算法" />
                <Operation RuleId="200000" SolutionId="200007" Description="月管理费算法" />
            </Operation>
          
            <Else>
              <IfOperation Condition ='bus.GuaranteeSideKey==""' Description="两方合同，成都小贷模式">
              <Operation RuleId="100000" SolutionId="100012" Description="本金+利息+管理费+月担保费">
                <IfOperation Condition="IsLastBill(bus)" >
                  <Operation RuleId="200000" SolutionId="200009" Description="最后一期账单本金算法"/>
                  <Else>
                    <Operation RuleId="200000" SolutionId="200008"  Description="前期账单本金算法"/>
                  </Else>
                </IfOperation>

                <IfOperation Condition='bus.ServiceSideID&gt;0 and bus.GuaranteeSideID&gt;0 and bus.GuaranteeSideKey~="COMPANY/WX_SHWX_SERVICE" and bus.ServiceRate&gt; 0' >
                  <Operation RuleId="200000" SolutionId="200015" Description="月管理费一半算法" />
                  <Operation RuleId="200000" SolutionId="200016" Description="月管理费一半算法" />
                  <Else>
                    <Operation RuleId="200000" SolutionId="200007" Description="月管理费" />
                    <Operation RuleId="200000" SolutionId="200010" Description="0" />
                  </Else>
                </IfOperation>

                <Operation RuleId="200000" SolutionId="200003" Description="月利息算法" />
              </Operation>
			   <Else>
					<Operation RuleId="100000" SolutionId="100004" Description="本金+利息+服务费+月担保费">
						<IfOperation Condition="IsLastBill(bus)" >
						  <Operation RuleId="200000" SolutionId="200009" Description="最后一期账单本金算法"/>
						  <Else>
							<Operation RuleId="200000" SolutionId="200008"  Description="前期账单本金算法"/>
						  </Else>
						</IfOperation>

						<IfOperation Condition='bus.ServiceSideID&gt;0 and bus.GuaranteeSideID&gt;0 and bus.GuaranteeSideKey~="COMPANY/WX_SHWX_SERVICE" and bus.ServiceRate&gt; 0' >
						  <Operation RuleId="200000" SolutionId="200005" Description="月服务费一半算法" />
						  <Operation RuleId="200000" SolutionId="200006" Description="月服务费一半算法" />
						  <Else>
							<Operation RuleId="200000" SolutionId="200004" Description="月服务费" />
							<Operation RuleId="200000" SolutionId="200010" Description="0" />
						  </Else>
						</IfOperation>

						<Operation RuleId="200000" SolutionId="200003" Description="月利息算法" />
					  </Operation>
			   </Else>
              </IfOperation>
            </Else>
        </IfOperation>
      </Step>
    </Flow>

    <Flow Type="DeductFlowLogic" Description="自动扣款配置">
      <Step Type="DeductPackageFlowStep" Description="自动扣款配置">

        <IfOperation Condition ='bus.LendingSideKey=="COMPANY/WX_QDWX_LENDING"' Description="青岛楼一贷2+2合同">
          <Operation RuleId="300000" ToAccount="bus.ServiceSideID" DeductPlatform="GetDeductPlatform(bus)"  CanDeduct="FoticBuildingCanDeduct(bus)" SolutionId="300001" SpanBill="false" OldestBill="true" Description="所有科目">
          </Operation>
          <Else>
            <Operation RuleId="300000" ToAccount="4"  DeductPlatform="GetDeductPlatform(bus)" SolutionId="300032" SpanBill="false" OldestBill="true"  Description="不跨账单从最远一期扣款打包科目:代收费">
              <AfterOperation>
            <Operation RuleId="300000" ToAccount="bus.ServiceSideID"  DeductPlatform="GetDeductPlatform(bus)" CanDeduct="FoticBuildingCanDeduct(bus)" SolutionId="300011" SpanBill="false" OldestBill="true"  Description="不跨账单从最远一期扣款打包科目:保证金">
              <AfterOperation>
                <IfOperation Condition ='bus.GuaranteeSideKey==""' Description="两方合同，成都小贷模式">
                  <Operation RuleId="300000" ToAccount="bus.LendingSideID"  DeductPlatform="GetDeductPlatform(bus)" SolutionId="300001" SpanBill="false" OldestBill="true"  Description="不跨账单从最远一期扣款打包科目:所有科目">
                    <AfterOperation>
                      <IfOperation Condition ="instruction~=nil and instruction.SendResult &gt; 0" Description="打包失败">
                        <Operation RuleId="300000" ToAccount="bus.ServiceSideID"  DeductPlatform="GetDeductPlatform(bus)" SolutionId="300033" SpanBill="false" OldestBill="true" Description="不跨账单最远一期扣款拆包科目:月管理费+本息扣失" />
                      </IfOperation>
                    </AfterOperation>
                  </Operation>
                  <Else Description="四方合同，外贷模式">
                    <Operation RuleId="300000" ToAccount="bus.ServiceSideID"  DeductPlatform="GetDeductPlatform(bus)" SolutionId="300011" SpanBill="false" OldestBill="true"  Description="不跨账单从最远一期扣款打包科目:保证金">
                      <AfterOperation>
                        <IfOperation Condition ="instruction==nil or instruction.SendResult==0" Description="打包成功或者无需打包">
                          <Operation RuleId="300000" ToAccount="GetToAccountByBusinessStatus(bus)"  DeductPlatform="GetDeductPlatform(bus)" SolutionId="300001" SpanBill="false" OldestBill="true" Description="所有科目">
                            <AfterOperation>
                              <IfOperation Condition ="instruction~=nil and instruction.SendResult&gt;0" Description="打包失败">
                                <Operation RuleId="300000" ToAccount="GetToAccountByBusinessStatus(bus)"  DeductPlatform="GetDeductPlatform(bus)" SolutionId="300003" SpanBill="false" OldestBill="true" Description="本金+利息"/>
                              </IfOperation>
                            </AfterOperation>
                          </Operation>
                        </IfOperation>
                      </AfterOperation>
                    </Operation>
                  </Else>
                </IfOperation>
              </AfterOperation>
            </Operation>
          </AfterOperation>
        </Operation>
          </Else>
        </IfOperation>
        
      </Step>
    </Flow>

    <Flow Type="AdvCloanFlowLogic" Description="提前清贷逻辑配置">
      <Step Type="AdvCloanPackageFlowStep" Description="提前清贷打包规则">
        <IfOperation Condition ='bus.LendingSideKey=="COMPANY/WX_QDWX_LENDING"' Description="青岛楼一贷2+2合同">
          <Operation RuleId="300000" ToAccount="bus.ServiceSideID"  DeductPlatform="GetDeductPlatform(bus)" SolutionId="300001" SpanBill="true" OldestBill="true"  Description="跨账单从最远一期扣款打包科目:所有科目">
          </Operation>
          <Else>
            <Operation RuleId="300000" ToAccount="FoticBuildingAdvToAccount(bus)" DeductPlatform="GetDeductPlatform(bus)"  SolutionId="300001" SpanBill="true" OldestBill="true"  Description="跨账单从最远一期扣款打包科目:所有科目">
            </Operation>
          </Else>
        </IfOperation>
      </Step>
    </Flow>

    <Flow Type="GeneCapLostFlowLogic" Description="生成本息扣失">
      <Step Type="CapLostPackageFlowStep" Description="生成本息扣失科目">
		<IfOperation Condition ='bus.LendingSideKey=="COMPANY/WX_QDWX_LENDING"' Description="青岛楼一贷2+2合同">
        <Operation RuleId="400000" SolutionId="400001"  Description="产生本息扣失科目:本金+利息+管理费"/>
		<Else>
			<Operation RuleId="400000" SolutionId="400003"  Description="产生本息扣失科目:本金+利息"/>
		</Else>
		</IfOperation>
      </Step>
    </Flow>

    <Flow Type="GeneSerLostFlowLogic" Description="服务费扣失">
      <Step Type="SerLostPackageFlowStep" Description="生成服务费扣失科目">
		<IfOperation Condition ='bus.GuaranteeSideKey==""' Description="两方合同，成都小贷模式">
			<Operation RuleId="500000" SolutionId="500002"  Description="产生本息扣失科目:管理费"/>
		<Else>
			<Operation RuleId="500000" SolutionId="500001"  Description="产生本息扣失科目:服务费"/>
		</Else>
		</IfOperation>
	  </Step>
    </Flow>

    <Flow Type="GenePenaFlowLogic" Description="产生罚息科目">
      <Step Type="PenaPackageFlowStep">
        <IfOperation Condition ='bus.LendingSideKey=="COMPANY/WX_QDWX_LENDING"' Description="青岛楼一贷2+2合同">
          <Operation RuleId="600000" SolutionId="600003"  Description="产生罚息科目:本金+利息"/>
          <Else>
            <IfOperation Condition ='bus.GuaranteeSideKey==""' Description="两方合同，成都小贷模式">
                <Operation RuleId="600000" SolutionId="600002"  Description="产生罚息科目:本金+利息+管理费"/>
              <Else>
                <Operation RuleId="600000" SolutionId="600003"  Description="产生罚息科目:本金+利息"/>
              </Else>
            </IfOperation>
          </Else>
        </IfOperation>
      </Step>
    </Flow>

    <Flow Type="ManualDeductFlowLogic" Description="手工扣款配置">
      <Step Type="ManualPackageFlowStep">
        <IfOperation Condition="bus.CLoanStatus==7" >
          <IfOperation Condition='bus.LendingSideKey=="COMPANY/WX_QDWX_LENDING"' Description="青岛楼一贷">
              <Operation RuleId="300000" SolutionId="300001" ToAccount="bus.ServiceSideID"  DeductPlatform="GetDeductPlatform(bus)" SpanBill="ture" OldestBill="true" EnoughBill="true" EnoughBillItem="true" Description="提前清贷,跨账单，足额" />
            <Else>
              <Operation RuleId="300000" SolutionId="300001" ToAccount="GetToAccountByBusinessStatus(bus)"  DeductPlatform="GetDeductPlatform(bus)" SpanBill="ture" OldestBill="true" EnoughBill="true" EnoughBillItem="true" Description="提前清贷,跨账单，足额" />
            </Else>
          </IfOperation>
          <Else>
            <IfOperation Condition='bus.GuaranteeSideKey==nil or bus.GuaranteeSideKey==""' >
               
                  <IfOperation Condition='bus.LendingSideKey=="COMPANY/WX_QDWX_LENDING"' Description="青岛楼一贷">
                        
                      <Operation SpanBill="true" OldestBill="true" DeductPlatform="GetDeductPlatform(bus)" EnoughBillItem="false" Description="青岛楼一贷手工扣款非足额,跨账单，非足额">
                          <Operation RuleId="300000" SolutionId="300032" ToAccount="4"  DeductPlatform="GetDeductPlatform(bus)"  Description="代收费"/>
                          <Operation RuleId="300000" SolutionId="300030" ToAccount="bus.ServiceSideID"  DeductPlatform="GetDeductPlatform(bus)"  Description="代收渠道费"/>
                          <Operation RuleId="300000" SolutionId="300026" ToAccount="bus.ServiceSideID"  DeductPlatform="GetDeductPlatform(bus)"  Description="本金"/>
                          <Operation RuleId="300000" SolutionId="300027" ToAccount="bus.ServiceSideID"  DeductPlatform="GetDeductPlatform(bus)"  Description="利息"/>
                          <Operation RuleId="300000" SolutionId="300029" ToAccount="bus.ServiceSideID"  DeductPlatform="GetDeductPlatform(bus)" Description="管理费"/>
                          <Operation RuleId="300000" SolutionId="300013" ToAccount="bus.ServiceSideID"  DeductPlatform="GetDeductPlatform(bus)" Description="本息扣失"/>
                          <Operation RuleId="300000" SolutionId="300015" ToAccount="bus.ServiceSideID"  DeductPlatform="GetDeductPlatform(bus)"  Description="罚息"/>
                          <Operation RuleId="300000" SolutionId="300008" ToAccount="bus.ServiceSideID"  DeductPlatform="GetDeductPlatform(bus)"  Description="服务费"/>
                          <Operation RuleId="300000" SolutionId="300014" ToAccount="bus.ServiceSideID"  DeductPlatform="GetDeductPlatform(bus)"  Description="服务费扣失"/>
                        </Operation>
                     
                      <Else>
                          <IfOperation Condition='bus.LendingSideKey=="COMPANY/WX_CDWS_LENDING" or string.find(bus.LendingSideKey,"COMPANY/WX_SZWX_LEASE")~=nil' Description="放款方为：成都小贷、苏州融资租赁支持不足额">
                            <Operation SpanBill="true" OldestBill="true" DeductPlatform="GetDeductPlatform(bus)" EnoughBillItem="false" Description="成都小贷2方合同手工扣款非足额（自由资金）,跨账单，非足额">
                              <Operation RuleId="300000" SolutionId="300011" ToAccount="bus.ServiceSideID" DeductPlatform="GetDeductPlatform(bus)"   Description="保证金"/>
                              <Operation RuleId="300000" SolutionId="300032" ToAccount="4"  DeductPlatform="GetDeductPlatform(bus)"  Description="代收费"/>
                              <Operation RuleId="300000" SolutionId="300008" ToAccount="GetToAccountByBusinessStatus(bus)"  DeductPlatform="GetDeductPlatform(bus)"  Description="服务费"/>
							  <Operation RuleId="300000" SolutionId="300029" ToAccount="GetToAccountByBusinessStatus(bus)"  DeductPlatform="GetDeductPlatform(bus)"  Description="管理费"/>
                              <Operation RuleId="300000" SolutionId="300014" ToAccount="GetToAccountByBusinessStatus(bus)"  DeductPlatform="GetDeductPlatform(bus)"  Description="服务费扣失"/>
                              <Operation RuleId="300000" SolutionId="300013" ToAccount="GetToAccountByBusinessStatus(bus)"  DeductPlatform="GetDeductPlatform(bus)"  Description="本息扣失"/>
                              <Operation RuleId="300000" SolutionId="300015" ToAccount="GetToAccountByBusinessStatus(bus)"  DeductPlatform="GetDeductPlatform(bus)"  Description="罚息"/>
                              <Operation RuleId="300000" SolutionId="300026" ToAccount="GetToAccountByBusinessStatus(bus)"  DeductPlatform="GetDeductPlatform(bus)"  Description="本金"/>
                              <Operation RuleId="300000" SolutionId="300027" ToAccount="GetToAccountByBusinessStatus(bus)"  DeductPlatform="GetDeductPlatform(bus)"  Description="利息"/>
                            </Operation>
                          <Else>
                            <Operation SpanBill="true" OldestBill="true" DeductPlatform="GetDeductPlatform(bus)" EnoughBillItem="true" Description="跨账单，足额">
                              <Operation RuleId="300000" SolutionId="300011" ToAccount="bus.ServiceSideID"  DeductPlatform="GetDeductPlatform(bus)"  Description="保证金"/>
                              <Operation RuleId="300000" SolutionId="300032" ToAccount="4"  DeductPlatform="GetDeductPlatform(bus)"  Description="代收费"/>
                              <Operation RuleId="300000" SolutionId="300008" ToAccount="GetToAccountByBusinessStatus(bus)"  DeductPlatform="GetDeductPlatform(bus)"  Description="服务费"/>
							  <Operation RuleId="300000" SolutionId="300029" ToAccount="GetToAccountByBusinessStatus(bus)"  DeductPlatform="GetDeductPlatform(bus)"  Description="管理费"/>
                              <Operation RuleId="300000" SolutionId="300014" ToAccount="GetToAccountByBusinessStatus(bus)" DeductPlatform="GetDeductPlatform(bus)"   Description="服务费扣失"/>
                              <Operation RuleId="300000" SolutionId="300013" ToAccount="GetToAccountByBusinessStatus(bus)" DeductPlatform="GetDeductPlatform(bus)"  Description="本息扣失"/>
                              <Operation RuleId="300000" SolutionId="300015" ToAccount="GetToAccountByBusinessStatus(bus)" DeductPlatform="GetDeductPlatform(bus)"  Description="罚息"/>
                              <Operation RuleId="300000" SolutionId="300002" ToAccount="GetToAccountByBusinessStatus(bus)" DeductPlatform="GetDeductPlatform(bus)"  Description="本金+利息"/>
                            </Operation>
                          </Else>
                        </IfOperation>
                      </Else>
                      
                    </IfOperation>
              
              <Else>
                
                <IfOperation Condition="bus.BusinessStatus==2" >
                  <Operation SpanBill="true" OldestBill="true" DeductPlatform="GetDeductPlatform(bus)" EnoughBillItem="false" Description="外贸和渤海四方合同担保后诉讼前，跨账单，非足额">
                    <Operation RuleId="300000" SolutionId="300011" ToAccount="bus.ServiceSideID"  DeductPlatform="GetDeductPlatform(bus)"  Description="保证金"/>
                    <Operation RuleId="300000" SolutionId="300032" ToAccount="4"  DeductPlatform="GetDeductPlatform(bus)"  Description="代收费"/>
                    <Operation RuleId="300000" SolutionId="300026" ToAccount="GetToAccountByBusinessStatus(bus)"  DeductPlatform="GetDeductPlatform(bus)"  Description="本金"/>
                    <Operation RuleId="300000" SolutionId="300027" ToAccount="GetToAccountByBusinessStatus(bus)"  DeductPlatform="GetDeductPlatform(bus)"  Description="利息"/>
                    <Operation RuleId="300000" SolutionId="300013" ToAccount="GetToAccountByBusinessStatus(bus)"  DeductPlatform="GetDeductPlatform(bus)"  Description="本息扣失"/>
                    <Operation RuleId="300000" SolutionId="300015" ToAccount="GetToAccountByBusinessStatus(bus)"  DeductPlatform="GetDeductPlatform(bus)" Description="罚息"/>
                    <Operation RuleId="300000" SolutionId="300008" ToAccount="GetToAccountByBusinessStatus(bus)"  DeductPlatform="GetDeductPlatform(bus)" Description="服务费"/>
					<Operation RuleId="300000" SolutionId="300029" ToAccount="GetToAccountByBusinessStatus(bus)" DeductPlatform="GetDeductPlatform(bus)"   Description="管理费"/>
                    <Operation RuleId="300000" SolutionId="300028" ToAccount="GetToAccountByBusinessStatus(bus)" DeductPlatform="GetDeductPlatform(bus)"   Description="月担保管理费"/>
                    <Operation RuleId="300000" SolutionId="300014" ToAccount="GetToAccountByBusinessStatus(bus)" DeductPlatform="GetDeductPlatform(bus)"  Description="服务费扣失"/>
                  </Operation>
                  <Else>
                    <Operation SpanBill="true" OldestBill="true" DeductPlatform="GetDeductPlatform(bus)" EnoughBillItem="true" Description="跨账单，足额">
                      <Operation RuleId="300000" SolutionId="300011" ToAccount="bus.ServiceSideID"  DeductPlatform="GetDeductPlatform(bus)"  Description="保证金"/>
                      <Operation RuleId="300000" SolutionId="300032" ToAccount="4"  DeductPlatform="GetDeductPlatform(bus)"  Description="代收费"/>
                      <Operation RuleId="300000" SolutionId="300002" ToAccount="GetToAccountByBusinessStatus(bus)"  DeductPlatform="GetDeductPlatform(bus)"  Description="本金+利息+管理费"/>
                      <Operation RuleId="300000" SolutionId="300013" ToAccount="GetToAccountByBusinessStatus(bus)"  DeductPlatform="GetDeductPlatform(bus)"  Description="本息扣失"/>
                      <Operation RuleId="300000" SolutionId="300015" ToAccount="GetToAccountByBusinessStatus(bus)"  DeductPlatform="GetDeductPlatform(bus)" Description="罚息"/>
                      <Operation RuleId="300000" SolutionId="300025" ToAccount="GetToAccountByBusinessStatus(bus)"  DeductPlatform="GetDeductPlatform(bus)"  Description="服务费+月担保管理费"/>
                      <Operation RuleId="300000" SolutionId="300014" ToAccount="GetToAccountByBusinessStatus(bus)"  DeductPlatform="GetDeductPlatform(bus)"  Description="服务费扣失"/>
                    </Operation>
                  </Else>
                </IfOperation>
                
               </Else>
            </IfOperation>
          </Else>
        </IfOperation>
      </Step>
      <Step Type="ManualLitigationFlowStep" Description="诉讼账单的配置">
        <IfOperation Condition='bus.LendingSideKey=="COMPANY/WX_QDWX_LENDING"' Description="青岛楼一贷">
          <Operation SpanBill="false" EnoughBillItem="false" DeductPlatform="GetDeductPlatform(bus)" Description="诉讼账单优先级配置">
            <Operation RuleId="300000" SolutionId="300026" ToAccount="bus.ServiceSideID" DeductPlatform="GetDeductPlatform(bus)"   Description="本金"/>
            <Operation RuleId="300000" SolutionId="300027" ToAccount="bus.ServiceSideID" DeductPlatform="GetDeductPlatform(bus)"  Description="利息"/>
            <Operation RuleId="300000" SolutionId="300029" ToAccount="bus.ServiceSideID" DeductPlatform="GetDeductPlatform(bus)"  Description="管理费"/>
            <Operation RuleId="300000" SolutionId="300008" ToAccount="bus.ServiceSideID" DeductPlatform="GetDeductPlatform(bus)"  Description="服务费"/>
            <Operation RuleId="300000" SolutionId="300028" ToAccount="bus.ServiceSideID" DeductPlatform="GetDeductPlatform(bus)"  Description="月担保管理费"/>
            <Operation RuleId="300000" SolutionId="300014" ToAccount="bus.ServiceSideID" DeductPlatform="GetDeductPlatform(bus)"   Description="服务费扣失"/>
            <Operation RuleId="300000" SolutionId="300017" ToAccount="bus.ServiceSideID" DeductPlatform="GetDeductPlatform(bus)"  Description="诉讼费"/>
            <Operation RuleId="300000" SolutionId="300018" ToAccount="bus.ServiceSideID" DeductPlatform="GetDeductPlatform(bus)"   Description="诉讼违约金"/>
          </Operation>
          <Else>
            <Operation SpanBill="false" EnoughBillItem="false" DeductPlatform="GetDeductPlatform(bus)" Description="诉讼账单优先级配置">
              <Operation RuleId="300000" SolutionId="300026" ToAccount="GetToAccountByBusinessStatus(bus)" DeductPlatform="GetDeductPlatform(bus)"   Description="本金"/>
              <Operation RuleId="300000" SolutionId="300027" ToAccount="GetToAccountByBusinessStatus(bus)" DeductPlatform="GetDeductPlatform(bus)"   Description="利息"/>
              <Operation RuleId="300000" SolutionId="300008" ToAccount="GetToAccountByBusinessStatus(bus)" DeductPlatform="GetDeductPlatform(bus)"   Description="服务费"/>
			  <Operation RuleId="300000" SolutionId="300029" ToAccount="GetToAccountByBusinessStatus(bus)" DeductPlatform="GetDeductPlatform(bus)"   Description="管理费"/>
              <Operation RuleId="300000" SolutionId="300028" ToAccount="GetToAccountByBusinessStatus(bus)" DeductPlatform="GetDeductPlatform(bus)"   Description="月担保管理费"/>
              <Operation RuleId="300000" SolutionId="300014" ToAccount="GetToAccountByBusinessStatus(bus)" DeductPlatform="GetDeductPlatform(bus)"   Description="服务费扣失"/>
              <Operation RuleId="300000" SolutionId="300017" ToAccount="GetToAccountByBusinessStatus(bus)" DeductPlatform="GetDeductPlatform(bus)"   Description="诉讼费"/>
              <Operation RuleId="300000" SolutionId="300018" ToAccount="GetToAccountByBusinessStatus(bus)" DeductPlatform="GetDeductPlatform(bus)"   Description="诉讼违约金"/>
            </Operation>
          </Else>
        </IfOperation>
      </Step>
    </Flow>
	
	<Flow Type="ConfigBillItemLogic" Description="科目名称配置">
      <Step Type="ConfigBillItemFlowStep" Description="科目名称配置">
        <Operation Description="科目名称配置">
          return {[1]="月本金",[2]="月利息",[3]="月服务费",[4]="月担保管理费",
          [21]="本息扣失",[22]="服务费扣失",[23]="罚息",[9]="月管理费"}
        </Operation>
      </Step>
    </Flow>

    <Flow Type="ConfigCompanyLogic" Description="显示公司配置">
      <Step Type="ConfigCompanyFlowStep" Description="显示公司配置">
        <Operation Description="显示公司:4、管理方">
          return {[4]=bus.LendingSideKey}
        </Operation>
      </Step>
    </Flow>
  </BusinessLogic>
</RunModule>