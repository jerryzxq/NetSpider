<?xml version="1.0"?>
<!--
  有关如何配置 ASP.NET 应用程序的详细信息，请访问
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <configSections>
    <sectionGroup name="spring">
      <section name="context" type="Spring.Context.Support.ContextHandler, Spring.Core" />
      <section name="parsers" type="Spring.Context.Support.NamespaceParsersSectionHandler, Spring.Core" />
      <section name="objects" type="Spring.Context.Support.DefaultSectionHandler, Spring.Core" />
    </sectionGroup>
    <sectionGroup name="common">
      <section name="logging" type="Common.Logging.ConfigurationSectionHandler, Common.Logging" />
    </sectionGroup>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,log4net-net-1.0"/>
    <section name="quartz" type="System.Configuration.NameValueSectionHandler, System, Version=1.0.5000.0,Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
    <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
      <section name="Vcredit.NetSpider.RestService.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    </sectionGroup>
    <section name="RedisConfig" type="Vcredit.NetSpider.Cache.RedisConfigInfo, Vcredit.NetSpider.Cache"/>
  </configSections>
  <spring xmlns="http://www.springframework.net">
    <parsers>
      <parser type="Spring.Data.Config.DatabaseNamespaceParser, Spring.Data" />
      <parser type="Spring.Transaction.Config.TxNamespaceParser, Spring.Data" />
    </parsers>
    <context>
      <resource uri="config://spring/objects" />
      <resource uri="assembly://Vcredit.NetSpider.Service/Vcredit.NetSpider.Service.Config/DaoBase.xml" />
      <resource uri="~/database/netspider.xml" />
    </context>
    <objects xmlns="http://www.springframework.net" />
  </spring>
  <common>
    <logging>
      <factoryAdapter type="Common.Logging.Simple.NoOpLoggerFactoryAdapter, Common.Logging"></factoryAdapter>
    </logging>
  </common>
  <log4net>
    <!-- 日志文件部分log输出格式的设定 -->
    <appender name="RollingLogFileAppender" type="log4net.Appender.RollingFileAppender">
      <file value="Logs\Log_"/>
      <appendToFile value="true"/>
      <rollingStyle value="Date"/>
      <datePattern value="yyyyMMdd'.txt'"/>
      <staticLogFileName value="false"/>
      <layout type="log4net.Layout.PatternLayout">
        <header value="------------------------------------------------------------&#xA;"/>
        <ConversionPattern value="%date [%thread] %-5level %logger [%ndc] - %message%newline"/>
      </layout>
    </appender>
    <!-- Setup the root category, add the appenders and set the default level -->
    <!--<root>
      <level value="ALL"/>
      <appender-ref ref="ConsoleAppender"/>
      <appender-ref ref="RollingLogFileAppender"/>
    </root>-->
    <logger name="logerror">
      <level value="Info" />
      <appender-ref ref="RollingLogFileAppender" />
      <!--<appender-ref ref="LogSmtpAppender" />-->
    </logger>
    <logger name="loginfo">
      <level value="Info" />
      <appender-ref ref="RollingLogFileAppender" />
    </logger>

    <!--定义邮件发送--><!--
    <appender name="LogSmtpAppender" type="log4net.Appender.SmtpAppender">
      <authentication value="Basic" />
      <to value="zhangzhibo@vcredit.com,songbingzhi@os.vcredit.com,lihailin@vcredit.com" />
      <from value="zhangzhibo@vcredit.com" />
      <username value="zhangzhibo@vcredit.com" />
      <password value="zhangzhibo" />
      <subject value="蜂鸟社保数据采集应用错误日志消息" />
      <smtpHost value="smtp.vcredit.com" />
      <port value="25"/>
      <bufferSize value="2048" />
      --><!--超长部分是否丢弃--><!--
      <lossy value="true" />
      --><!-- 下面的定义， 就是 日志级别 大于 WARN 的， 才发邮件.  --><!--
      <evaluator type="log4net.Core.LevelEvaluator">
        <threshold value="ERROR"/>
      </evaluator>
      --><!-- 下面是 定义邮件的格式 （好多换行啊） --><!--
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%property{log4net:HostName} :: %level :: %message %newlineLogger: %logger%newlineThread: %thread%newlineDate: %date%newlineNDC: %property{NDC}%newline%newline" />
      </layout>

    </appender>-->
  </log4net>
  <quartz>
    <add key="quartz.scheduler.instanceName" value="ExampleDefaultQuartzScheduler"/>
    <add key="quartz.threadPool.type" value="Quartz.Simpl.SimpleThreadPool, Quartz"/>
    <add key="quartz.threadPool.threadCount" value="10"/>
    <add key="quartz.threadPool.threadPriority" value="2"/>
    <add key="quartz.jobStore.misfireThreshold" value="60000"/>
    <add key="quartz.jobStore.type" value="Quartz.Simpl.RAMJobStore, Quartz"/>
    <!--******************************Plugin配置********************************************* -->
    <add key="quartz.plugin.xml.type" value="Quartz.Plugin.Xml.XMLSchedulingDataProcessorPlugin, Quartz" />
    <add key="quartz.plugin.xml.fileNames" value="~/quartz_jobs.xml"/>
  </quartz>
  <RedisConfig WriteServerList="Vcredit1!!@10.138.60.83:2214" ReadServerList="Vcredit1!!@10.138.60.83:2214" MaxWritePoolSize="60"
        MaxReadPoolSize="60" AutoStart="true" LocalCacheTime="180" RecordeLog="false">
  </RedisConfig>
  <appSettings>
    <!--<add key="tessdata" value="E:\www\restservice\files\tessdata"/>-->
    <add key="localUrl" value="http://localhost:10172/"/>
    <add key="proxyipServiceUrl" value="http://10.1.6.102:6002/"/>
    <add key="FtpAddress" value="10.138.60.16:21/" />
    <add key="FtpUserName" value="kkd" />
    <add key="FtpPassword" value="123" />
    <add key="FileDir" value="C://temp" />
    <add key="xxqdWeChatService" value="http://10.1.8.12:18080/star/data/ws/rest/bsmutual/GetMobileInfo"/>
    <add key="collectionWebChatService" value="http://10.1.6.102:6001/dangernum/query/getallcollection/Json"/>
    <add key="grayNumberService" value="http://10.1.6.102:6001/graynumber/query/getallcollection/Json"/>
    <!--发送邮件程序配置-->
    <add key="SenderServerHost" value="smtp.vcredit.com" />
    <add key="port" value="25" />
    <add key="SenderUsername" value="zhangzhibo@vcredit.com" />
    <add key="SenderPassword" value="zhangzhibo" />
    <add key="Recipients" value="zhangzhibo@vcredit.com,yuzhaoliang@vcredit.com,wangyi02@os.vcredit.com" />
  </appSettings>
  <system.web>
    <httpRuntime maxRequestLength="2147483644"/>
    <compilation debug="true" targetFramework="4.0"/>
    <!--
            If you are deploying to a cloud environment that has multiple web server instances,
            you should change session state mode from "InProc" to "Custom". In addition,
            change the connection string named "DefaultConnection" to connect to an instance
            of SQL Server (including SQL Azure and SQL  Compact) instead of to SQL Server Express.
      -->
    <sessionState mode="InProc" customProvider="DefaultSessionProvider">
      <providers>
        <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection"/>
      </providers>
    </sessionState>
    <pages controlRenderingCompatibilityVersion="4.0"/>
  </system.web>
  <system.webServer>
    <httpProtocol>
      <customHeaders>
        <add name="Access-Control-Allow-Origin" value="*" />
        <add name="Access-Control-Allow-Methods" value="POST" />
        <add name="Access-Control-Allow-Headers" value="content-type" />
      </customHeaders>
    </httpProtocol>
    <!--兼容IIS6与IIS7模式-->
    <validation validateIntegratedModeConfiguration="false"/>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="SpiderServiceCallbackSoap"/>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://localhost:9303/services/SpiderServiceCallback.asmx" binding="basicHttpBinding" bindingConfiguration="SpiderServiceCallbackSoap" contract="VBSSpiderServiceCallback.SpiderServiceCallbackSoap" name="SpiderServiceCallbackSoap"/>
    </client>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>
    <standardEndpoints>
      <webHttpEndpoint>
        <!-- 
            Configure the WCF REST service base address via the global.asax.cs file and the default endpoint 
            via the attributes on the <standardEndpoint> element below
        -->
        <standardEndpoint name="" maxReceivedMessageSize="2000000" helpEnabled="true"/>
      </webHttpEndpoint>
    </standardEndpoints>
  </system.serviceModel>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="DotNetOpenAuth.Core" publicKeyToken="2780ccd10d57b246"/>
        <bindingRedirect oldVersion="1.0.0.0-4.0.0.0" newVersion="4.1.0.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="DotNetOpenAuth.AspNet" publicKeyToken="2780ccd10d57b246"/>
        <bindingRedirect oldVersion="1.0.0.0-4.0.0.0" newVersion="4.1.0.0"/>
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <connectionStrings>
    <!--<add name="MongoDB" connectionString="mongodb://10.100.26.42:27017"/>
    <add name="CrawlerMongoDB" connectionString="mongodb://10.100.26.42:27017"/>
    <add name="AnalysisMongoDB" connectionString="mongodb://10.100.26.42:27017"/>-->
    <add name="CrawlerMongoDB" connectionString="mongodb://sa:sasa@10.138.60.25:27017"/>
    <add name="AnalysisMongoDB" connectionString="mongodb://sa:sasa@10.138.60.25:27017"/>
    <add name="MongoDB" connectionString="mongodb://sa:sasa@10.138.60.25:27017"/>
    <!--<add name="MongoDB" connectionString="mongodb://10.1.6.108:27017"/>
    <add name="CrawlerMongoDB" connectionString="mongodb://10.1.8.32:27017"/>
    <add name="AnalysisMongoDB" connectionString="mongodb://10.1.6.108:27017"/>-->
  </connectionStrings>
  <applicationSettings>
    <Vcredit.NetSpider.RestService.Properties.Settings>
      <setting name="Vcredit_NetSpider_RestService_RCWebService_RCWebService"
        serializeAs="String">
        <value>http://10.1.6.155:8812/GateWay/RCService.asmx</value>
      </setting>
    </Vcredit.NetSpider.RestService.Properties.Settings>
  </applicationSettings>
  <!--<system.net>
    <settings>
      <httpWebRequest useUnsafeHeaderParsing="true" />
    </settings>
  </system.net>-->
</configuration>