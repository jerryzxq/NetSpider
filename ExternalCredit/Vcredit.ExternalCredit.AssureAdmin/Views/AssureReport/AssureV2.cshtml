
@{
    Layout = null;
}
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>AssureV2</title>

    <link href="~/Content/bootstrap.min.css" rel="stylesheet" />
    <link href="~/Content/fontawesome/css/font-awesome.min.css" rel="stylesheet" />
    <link href="~/Content/admin-lte/css/AdminLTE.min.css" rel="stylesheet" />
    <link href="~/Content/admin-lte/css/skins/_all-skins.min.css" rel="stylesheet" />

</head>
<body class="hold-transition skin-blue-light sidebar-mini">
    <div class="wrapper">
        <header class="main-header">
            <!-- Logo -->
            <a href="../../index2.html" class="logo">
                <!-- mini logo for sidebar mini 50x50 pixels -->
                <span class="logo-mini"><b>A</b>LT</span>
                <!-- logo for regular state and mobile devices -->
                <span class="logo-lg"><b>Admin</b>LTE</span>
            </a>
            <!-- Header Navbar: style can be found in header.less -->
            <nav class="navbar navbar-static-top" role="navigation">
                <!-- Sidebar toggle button-->
                <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>
            </nav>
        </header>
        <!-- Left side column. contains the logo and sidebar -->
        <aside class="main-sidebar">
            <!-- sidebar: style can be found in sidebar.less -->
            <section class="sidebar">
                <!-- search form -->
                <form action="#" method="get" class="sidebar-form">
                    <div class="input-group">
                        <input type="text" name="q" class="form-control" placeholder="Search...">
                        <span class="input-group-btn">
                            <button type="submit" name="search" id="search-btn" class="btn btn-flat"><i class="fa fa-search"></i></button>
                        </span>
                    </div>
                </form>
                <!-- /.search form -->
                <!-- sidebar menu: : style can be found in sidebar.less -->
                <ul class="sidebar-menu">
                    <li class="header">MAIN NAVIGATION</li>
                    <li class="treeview">
                        <a href="#">
                            <i class="fa fa-dashboard"></i> <span>Dashboard</span> <i class="fa fa-angle-left pull-right"></i>
                        </a>
                        <ul class="treeview-menu">
                            <li><a href="../../index.html"><i class="fa fa-circle-o"></i> Dashboard v1</a></li>
                            <li><a href="../../index2.html"><i class="fa fa-circle-o"></i> Dashboard v2</a></li>
                        </ul>
                    </li>
                </ul>
            </section>
            <!-- /.sidebar -->
        </aside>

        <!-- Content Wrapper. Contains page content -->
        <div class="content-wrapper">
            <!-- Content Header (Page header) -->
            <section class="content-header">
                <h1>
                    担保征信查询
                    <small>Preview</small>
                </h1>
            </section>

            <!-- Main content -->
            <section class="content">
                <div class="row">
                    <!-- left column -->
                    <div class="col-md-12">
                        <!-- general form elements -->
                        <div class="box box-primary">
                            <div class="box-header with-border">
                                <h3 class="box-title">Quick Example</h3>
                            </div><!-- /.box-header -->
                            <!-- form start -->
                            <form role="form">
                                <div class="box-body">
                                    <div class="form-group col-sm-6">
                                        <label class="col-sm-4 control-label" for="certType">证件类型</label>
                                        <div class="input-group col-sm-8">
                                            <select class="form-control" name="certType" id="certType">
                                                <option value="0">身份证</option>
                                                <option value="1">户口本</option>
                                                <option value="2">护照</option>
                                                <option value="3">军官证</option>
                                                <option value="4">士兵证</option>
                                                <option value="5">港澳居民来往内地通行证</option>
                                                <option value="6">台湾同胞来往内地通行证</option>
                                                <option value="7">临时身份证</option>
                                                <option value="8">外国人居留证</option>
                                                <option value="9">警官证</option>
                                                <option value="A">香港身份证</option>
                                                <option value="B">澳门身份证</option>
                                                <option value="C">台湾身份证</option>
                                                <option value="X">其他证件</option>
                                            </select>

                                        </div>
                                    </div>
                                    <div class="form-group col-sm-6">
                                        <label class="col-sm-4 control-label" for="certNo">证件号码</label>
                                        <div class="input-group col-sm-8">
                                            <input type="text" class="form-control" name="certNo" id="certNo" placeholder="证件号码" required>
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-6">
                                        <label class="col-sm-4 control-label" for="name">姓名</label>
                                        <div class="input-group col-sm-8">
                                            <input type="text" class="form-control" name="name" id="name" placeholder="姓名" required>
                                        </div>
                                    </div>
                                    <div class="form-group col-sm-6">
                                        <label class="col-sm-4 control-label" for="queryReason">查询原因</label>
                                        <div class="input-group col-sm-8">
                                            <select class="form-control" name="queryReason" id="queryReason">
                                                <option value="01">贷后管理</option>
                                                <option value="02">贷款审批</option>
                                                <option value="03">担保资格查询</option>
                                            </select>
                                        </div>
                                    </div>
                                </div><!-- /.box-body -->
                                <div class="box-footer">
                                    <button type="button" class="btn btn-primary" id="btnSubmit">提交</button>
                                </div>
                            </form>
                        </div><!-- /.box -->
                    </div><!--/.col (left) -->
                </div>   <!-- /.row -->

                <div class="modal fade" id="div_modal">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button aria-label="Close" data-dismiss="modal" class="close" type="button"><span aria-hidden="true">×</span></button>
                                <h4 class="modal-title">提醒</h4>
                            </div>
                            <div class="modal-body">
                                <p id="p_msg"></p>
                            </div>
                            <div class="modal-footer">
                            </div>
                        </div>
                    </div>
                </div>

            </section><!-- /.content -->
        </div><!-- /.content-wrapper -->
        <footer class="main-footer">
            <div class="pull-right hidden-xs">
                <b>Version</b> 2.3.0
            </div>
            <strong>Copyright &copy; 2014-2015 <a href="http://almsaeedstudio.com">Almsaeed Studio</a>.</strong> All rights reserved.
        </footer>
    </div><!-- ./wrapper -->

    <script src="~/Scripts/jquery-2.1.3.js"></script>
    <script src="~/Scripts/bootstrap.js"></script>
    <script src="~/admin-lte/js/app.js"></script>

    <script type="text/javascript">
        $(function () {
            assure.init();
        });

        var assure = {
            init: function () {
                var _this = this;

                _this.bindEvent();
            },
            bindEvent: function () {
                $("#btnSubmit").on('click', function () {
                    $("#p_msg").text("正在提交...");
                    $("#btnSubmit").addClass("disabled")

                    var certType = $("#certType").val();
                    var certNo = $("#certNo").val();
                    var name = $("#name").val();
                    var queryReason = $("#queryReason").val();

                    var data = {
                        certType: certType,
                        certNo: certNo,
                        name: name,
                        queryReason: queryReason,
                    };
                    var url = "/api/Assure/AddQueryInfo";
                    $.ajax({
                        url: url,
                        data: data,
                        type: "post",
                        dataType: "json",
                        success: function (data) {
                            console.log(data);

                            if (!data.isSuccess) {

                                var error = "";
                                if (data.result["param.CertNo"]) {
                                    for (var i = 0; i < data.result["param.CertNo"].errors.length; i++) {
                                        error += data.result["param.CertNo"].errors[i].errorMessage + "; ";
                                    }
                                }
                                if (data.result["param.Name"]) {
                                    for (var i = 0; i < data.result["param.Name"].errors.length; i++) {
                                        error += data.result["param.Name"].errors[i].errorMessage + "; ";
                                    }
                                }
                                //$("#p_msg").text(JSON.stringify(data.result));
                                $("#p_msg").text(error);
                            }
                            else if (data.isSuccess) {
                                $("#p_msg").text(JSON.stringify(data.statusDescription));
                            }
                            else {
                                $("#p_msg").text(JSON.stringify(data));
                            }

                            $("#div_modal").modal("toggle");

                            $("#btnSubmit").removeClass("disabled")
                        },
                        error: function (xhr, textStatus, err) {
                            console.log(err);
                        },
                        complete: function ()
                        { }
                    });
                });
            },
        };
    </script>
</body>
</html>
